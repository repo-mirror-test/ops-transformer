# -----------------------------------------------------------------------------------------------------------
# Copyright (c) 2025 Huawei Technologies Co., Ltd.
# This program is free software, you can redistribute it and/or modify it under the terms and conditions of
# CANN Open Software License Agreement Version 2.0 (the "License").
# Please refer to the License for details. You may not use this file except in compliance with the License.
# THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED,
# INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE.
# See LICENSE in the root of the software repository for the full text of the License.
# -----------------------------------------------------------------------------------------------------------
# test_config.yaml
#
# 用来配置 CI 如何根据文件变更列表触发相应的验证
#
# 配置以结点为最小单位，结点可以处在不同的目录层级，解析器基于 module:True 标识确认结点位置，例如：
# global_config: -------------- 一级目录下的结点
#   module: True
# attention:
#   flash_attention_score: ---- 二级目录下的结点
#     module: True
# mc2:
#   matrix:
#     all_gather_matmul: ------ 三级目录下的结点
#       module: True
#
# 对于一个结点，允许配置的字段如下：
# op_name: -------------------- 结点名，一般为算子名
#   module: True -------------- 固定写法，标识此处为一个结点
#   src: ---------------------- [可选] 配置看护的源码列表，当其中的文件被修改时，会触发该结点 options 中配置的算子验证
#     - op_name --------------- 算子的根目录一般需要看护
#     - common ---------------- 算子依赖的一些公共文件一般也需要看护
#   exclude: ------------------ [可选] 配置排除的源码列表，里面的文件不会被看护
#     - op_name/docs ---------- 算子的文档目录一般需要排除
#     - op_name/README.md ----- 算子的 README 文件一般需要排除
#   ut_cov_exclude: ----------- [可选] 配置统计 ut 覆盖率时，需要排除的源码列表
#     - op_name/examples ------ 算子的 examples 目录一般不需要看护覆盖率
#     - op_name/tests --------- 算子的 tests 目录一般不需要看护覆盖率
#   test: --------------------- [可选] 配置该结点的校验方式，目前支持 example、ut
#     example: True ----------- [可选] 配置为 True 时，验证会被触发，未填写的字段默认为 True
#     ut: False --------------- [可选] 配置为 False 时，验证不会被触发，其他结点的 options 配置了本结点时，也不会触发本结点的验证
#   options: ------------------ [可选] 校验列表，用于配置当前结点的 src 被修改时，需要触发的验证
#     - op_name --------------- 当前算子
#     - another_op_name ------- 需要一起验证的算子（例如有些算子在examples用例中需要一起执行），被触发结点的options不会递归触发
# 注意，exclude 和 ut_cov_exclude 的影响不局限于当前结点，而是对全仓代码生效，慎用正则表达式！

global_config:
  module: True
  src:
    - global_config.cpp # ci不允许屏蔽完后没有文件，暂时先放一个不影响的文件在这
  ut_cov_exclude:
    - "*/tests/*"
    - "*/third_party/*"
    - "*/gtest/*"
    - "*/json/*"
    - build
    - common
    - mc2/3rd
    - mc2/common

attention:
  flash_attention_score:
    module: True
    src:
      - attention/flash_attention_score
    exclude:
      - attention/flash_attention_score/docs
      - attention/flash_attention_score/README.md
    ut_cov_exclude:
      - attention/flash_attention_score
    test:
        ut: False
    options:
      - flash_attention_score

  flash_attention_score_grad:
    module: True
    src:
      - attention/flash_attention_score_grad
    exclude:
      - attention/flash_attention_score_grad/docs
      - attention/flash_attention_score_grad/README.md
    ut_cov_exclude:
      - attention/flash_attention_score_grad
    test:
        examples: False
        ut: False
    options:
      - flash_attention_score_grad

  fused_infer_attention_score:
    module: True
    src:
      - attention/fused_infer_attention_score
    exclude:
      - attention/fused_infer_attention_score/docs
      - attention/fused_infer_attention_score/README.md
    ut_cov_exclude:
      - attention/fused_infer_attention_score
    # options:
    #   - incre_flash_attention
    #   # - fused_infer_attention_score
    #   - prompt_flash_attention

  incre_flash_attention:
    module: True
    src:
      - attention/incre_flash_attention
    exclude:
      - attention/incre_flash_attention/docs
      - attention/incre_flash_attention/README.md
    ut_cov_exclude:
      - attention/incre_flash_attention
    # options:
      # - incre_flash_attention
      # - fused_infer_attention_score

  nsa_compress:
    module: True
    src:
      - attention/nsa_compress
    exclude:
      - attention/nsa_compress/docs
      - attention/nsa_compress/README.md
    ut_cov_exclude:
      - attention/nsa_compress
    test:
        ut: False
    options:
      - nsa_compress

  nsa_compress_attention:
    module: True
    src:
      - attention/nsa_compress_attention
    exclude:
      - attention/nsa_compress_attention/docs
      - attention/nsa_compress_attention/README.md
    ut_cov_exclude:
      - attention/nsa_compress_attention
    test:
        ut: False
    options:
      - nsa_compress_attention

  nsa_compress_attention_infer:
    module: True
    src:
      - attention/nsa_compress_attention_infer
    exclude:
      - attention/nsa_compress_attention_infer/docs
      - attention/nsa_compress_attention_infer/README.md
    ut_cov_exclude:
      - attention/nsa_compress_attention_infer
    test:
        ut: False
    options:
      - nsa_compress_attention_infer

  nsa_compress_grad:
    module: True
    src:
      - attention/nsa_compress_grad
    exclude:
      - attention/nsa_compress_grad/docs
      - attention/nsa_compress_grad/README.md
    ut_cov_exclude:
      - attention/nsa_compress_grad
    test:
        ut: False
    options:
      - nsa_compress_grad

  nsa_compress_with_cache:
    module: True
    src:
      - attention/nsa_compress_with_cache
    exclude:
      - attention/nsa_compress_with_cache/docs
      - attention/nsa_compress_with_cache/README.md
    test:
        examples: False
        ut: False
    ut_cov_exclude:
      - attention/nsa_compress_with_cache
    options:
      - nsa_compress_with_cache

  nsa_selected_attention:
    module: True
    src:
      - attention/nsa_selected_attention
    exclude:
      - attention/nsa_selected_attention/docs
      - attention/nsa_selected_attention/README.md
    ut_cov_exclude:
      - attention/nsa_selected_attention
    test:
      ut: False
    options:
      - nsa_selected_attention

  nsa_selected_attention_grad:
    module: True
    src:
      - attention/nsa_selected_attention_grad
    exclude:
      - attention/nsa_selected_attention_grad/docs
      - attention/nsa_selected_attention_grad/README.md
    test:
      ut: False
    ut_cov_exclude:
      - attention/nsa_selected_attention_grad
    options:
      - nsa_selected_attention_grad

  nsa_selected_attention_infer:
    module: True
    src:
      - attention/nsa_selected_attention_infer
    exclude:
      - attention/nsa_selected_attention_infer/docs
      - attention/nsa_selected_attention_infer/README.md
    ut_cov_exclude:
      - attention/nsa_selected_attention_infer
    options:
      - nsa_selected_attention_infer

  prompt_flash_attention:
    module: True
    src:
      - attention/prompt_flash_attention
    exclude:
      - attention/prompt_flash_attention/docs
      - attention/prompt_flash_attention/README.md
    ut_cov_exclude:
      - attention/prompt_flash_attention
    # options:
      # - prompt_flash_attention
      # - fused_infer_attention_score

gmm:
  grouped_matmul:
    module: True
    src:
      - gmm/grouped_matmul
    exclude:
      - gmm/grouped_matmul/docs
      - gmm/grouped_matmul/README.md
    ut_cov_exclude:
      - gmm/grouped_matmul
    options:
      - grouped_matmul

  grouped_matmul_swiglu_quant:
    module: True
    src:
      - gmm/grouped_matmul_swiglu_quant
    exclude:
      - gmm/grouped_matmul_swiglu_quant/docs
      - gmm/grouped_matmul_swiglu_quant/README.md
    ut_cov_exclude:
      - gmm/grouped_matmul_swiglu_quant
    options:
      - grouped_matmul_swiglu_quant

  grouped_matmul_swiglu_quant_v2:
    module: True
    src:
      - gmm/grouped_matmul_swiglu_quant_v2
    exclude:
      - gmm/grouped_matmul_swiglu_quant_v2/docs
      - gmm/grouped_matmul_swiglu_quant_v2/README.md
    ut_cov_exclude:
      - gmm/grouped_matmul_swiglu_quant_v2
    options:
      - grouped_matmul_swiglu_quant_v2

  grouped_matmul_add:
    module: True
    src:
      - gmm/grouped_matmul_add
    exclude:
      - gmm/grouped_matmul_add/docs
      - gmm/grouped_matmul_add/README.md
    ut_cov_exclude:
      - gmm/grouped_matmul_add
    options:
      - grouped_matmul_add

  grouped_matmul_finalize_routing:
    module: True
    src:
      - gmm/grouped_matmul_finalize_routing
    exclude:
      - gmm/grouped_matmul_finalize_routing/docs
      - gmm/grouped_matmul_finalize_routing/README.md
    ut_cov_exclude:
      - gmm/grouped_matmul_finalize_routing
    options:
      - grouped_matmul_finalize_routing

ffn:
  ffn:
    module: True
    src:
      - ffn/ffn
    exclude:
      - ffn/ffn/docs
      - ffn/ffn/README.md
    ut_cov_exclude:
      - ffn/ffn
    test:
        ut: False
    options:
      - ffn

  swin_attention_ffn:
    module: True
    src:
      - ffn/swin_attention_ffn
    exclude:
      - ffn/swin_attention_ffn/docs
      - ffn/swin_attention_ffn/README.md
    ut_cov_exclude:
      - ffn/swin_attention_ffn
    options:
      - swin_attention_ffn

  swin_transformer_ln_qkv:
    module: True
    src:
      - ffn/swin_transformer_ln_qkv
    exclude:
      - ffn/swin_transformer_ln_qkv/docs
      - ffn/swin_transformer_ln_qkv/README.md
    ut_cov_exclude:
      - ffn/swin_transformer_ln_qkv
    options:
      - swin_transformer_ln_qkv

  swin_transformer_ln_qkv_quant:
    module: True
    src:
      - ffn/swin_transformer_ln_qkv_quant
    exclude:
      - ffn/swin_transformer_ln_qkv_quant/docs
      - ffn/swin_transformer_ln_qkv_quant/README.md
    ut_cov_exclude:
      - ffn/swin_transformer_ln_qkv_quant
    test:
        examples: False
        ut: True
    options:
      - swin_transformer_ln_qkv_quant

moe:
  moe_finalize_routing_v2:
    module: True
    src:
      - moe/moe_finalize_routing_v2
    exclude:
      - moe/moe_finalize_routing_v2/docs
      - moe/moe_finalize_routing_v2/README.md
    ut_cov_exclude:
      - moe/moe_finalize_routing_v2
    test:
      examples: False # aclnn_util.h报错
    options:
      - moe_finalize_routing_v2
      - moe_token_unpermute

  moe_compute_expert_tokens:
    module: True
    src:
      - moe/moe_compute_expert_tokens
    exclude:
      - moe/moe_compute_expert_tokens/docs
      - moe/moe_compute_expert_tokens/README.md
    ut_cov_exclude:
      - moe/moe_compute_expert_tokens
    options:
      - moe_compute_expert_tokens

  moe_finalize_routing:
    module: True
    src:
      - moe/moe_finalize_routing
    exclude:
      - moe/moe_finalize_routing/docs
      - moe/moe_finalize_routing/README.md
    ut_cov_exclude:
      - moe/moe_finalize_routing
    options:
      - moe_finalize_routing

  moe_finalize_routing_v2_grad:
    module: True
    src:
      - moe/moe_finalize_routing_v2_grad
    exclude:
      - moe/moe_finalize_routing_v2_grad/docs
      - moe/moe_finalize_routing_v2_grad/README.md
    ut_cov_exclude:
      - moe/moe_finalize_routing_v2_grad
    options:
      - moe_finalize_routing_v2_grad

  moe_fused_topk:
    module: True
    src:
      - moe/moe_fused_topk
    exclude:
      - moe/moe_fused_topk/docs
      - moe/moe_fused_topk/README.md
    ut_cov_exclude:
      - moe/moe_fused_topk
    options:
      - moe_fused_topk

  moe_gating_top_k:
    module: True
    src:
      - moe/moe_gating_top_k
    exclude:
      - moe/moe_gating_top_k/docs
      - moe/moe_gating_top_k/README.md
    ut_cov_exclude:
      - moe/moe_gating_top_k
    options:
      - moe_gating_top_k

  moe_gating_top_k_softmax:
    module: True
    src:
      - moe/moe_gating_top_k_softmax
    exclude:
      - moe/moe_gating_top_k_softmax/docs
      - moe/moe_gating_top_k_softmax/README.md
    ut_cov_exclude:
      - moe/moe_gating_top_k_softmax
    options:
      - moe_gating_top_k_softmax

  moe_gating_top_k_softmax_v2:
    module: True
    src:
      - moe/moe_gating_top_k_softmax_v2
    exclude:
      - moe/moe_gating_top_k_softmax_v2/docs
      - moe/moe_gating_top_k_softmax_v2/README.md
    ut_cov_exclude:
      - moe/moe_gating_top_k_softmax_v2
    options:
      - moe_gating_top_k_softmax_v2

  moe_init_routing:
    module: True
    src:
      - moe/moe_init_routing
    exclude:
      - moe/moe_init_routing/docs
      - moe/moe_init_routing/README.md
    ut_cov_exclude:
      - moe/moe_init_routing
    options:
      - moe_init_routing

  moe_init_routing_quant:
    module: True
    src:
      - moe/moe_init_routing_quant
    exclude:
      - moe/moe_init_routing_quant/docs
      - moe/moe_init_routing_quant/README.md
    ut_cov_exclude:
      - moe/moe_init_routing_quant
    options:
      - moe_init_routing_quant

  moe_init_routing_quant_v2:
    module: True
    src:
      - moe/moe_init_routing_quant_v2
    exclude:
      - moe/moe_init_routing_quant_v2/docs
      - moe/moe_init_routing_quant_v2/README.md
    ut_cov_exclude:
      - moe/moe_init_routing_quant_v2
    options:
      - moe_init_routing_quant_v2

  moe_init_routing_v2:
    module: True
    src:
      - moe/moe_init_routing_v2
    exclude:
      - moe/moe_init_routing_v2/docs
      - moe/moe_init_routing_v2/README.md
    ut_cov_exclude:
      - moe/moe_init_routing_v2
    test:
      ut: False
    options:
      - moe_init_routing_v2

  moe_init_routing_v2_grad:
    module: True
    src:
      - moe/moe_init_routing_v2_grad
    exclude:
      - moe/moe_init_routing_v2_grad/docs
      - moe/moe_init_routing_v2_grad/README.md
    ut_cov_exclude:
      - moe/moe_init_routing_v2_grad
    options:
      - moe_init_routing_v2_grad
      - moe_token_permute_grad

  moe_init_routing_v3:
    module: True
    src:
      - moe/moe_init_routing_v3
    exclude:
      - moe/moe_init_routing_v3/docs
      - moe/moe_init_routing_v3/README.md
    ut_cov_exclude:
      - moe/moe_init_routing_v3
    options:
      - moe_init_routing_v3

  moe_re_routing:
    module: True
    src:
      - moe/moe_re_routing
    exclude:
      - moe/moe_re_routing/docs
      - moe/moe_re_routing/README.md
    ut_cov_exclude:
      - moe/moe_re_routing
    options:
      - moe_re_routing

  moe_token_permute:
    module: True
    src:
      - moe/moe_token_permute
    exclude:
      - moe/moe_token_permute/docs
      - moe/moe_token_permute/README.md
    ut_cov_exclude:
      - moe/moe_token_permute
    options:
      - moe_token_permute

  moe_token_permute_grad:
    module: True
    src:
      - moe/moe_token_permute_grad
    exclude:
      - moe/moe_token_permute_grad/docs
      - moe/moe_token_permute_grad/README.md
    ut_cov_exclude:
      - moe/moe_token_permute_grad
    options:
      - moe_token_permute_grad

  moe_token_permute_with_ep:
    module: True
    src:
      - moe/moe_token_permute_with_ep
    exclude:
      - moe/moe_token_permute_with_ep/docs
      - moe/moe_token_permute_with_ep/README.md
    ut_cov_exclude:
      - moe/moe_token_permute_with_ep
    options:
      - moe_token_permute_with_ep

  moe_token_permute_with_ep_grad:
    module: True
    src:
      - moe/moe_token_permute_with_ep_grad
    exclude:
      - moe/moe_token_permute_with_ep_grad/docs
      - moe/moe_token_permute_with_ep_grad/README.md
    ut_cov_exclude:
      - moe/moe_token_permute_with_ep_grad
    options:
      - moe_token_permute_with_ep_grad

  moe_token_permute_with_routing_map:
    module: True
    src:
      - moe/moe_token_permute_with_routing_map
    exclude:
      - moe/moe_token_permute_with_routing_map/docs
      - moe/moe_token_permute_with_routing_map/README.md
    ut_cov_exclude:
      - moe/moe_token_permute_with_routing_map
    options:
      - moe_token_permute_with_routing_map

  moe_token_permute_with_routing_map_grad:
    module: True
    src:
      - moe/moe_token_permute_with_routing_map_grad
    exclude:
      - moe/moe_token_permute_with_routing_map_grad/docs
      - moe/moe_token_permute_with_routing_map_grad/README.md
    ut_cov_exclude:
      - moe/moe_token_permute_with_routing_map_grad
    options:
      - moe_token_permute_with_routing_map_grad
      - moe_token_unpermute

  moe_token_unpermute:
    module: True
    src:
      - moe/moe_token_unpermute
    exclude:
      - moe/moe_token_unpermute/docs
      - moe/moe_token_unpermute/README.md
    ut_cov_exclude:
      - moe/moe_token_unpermute
    test:
      examples: False # aclnn_util.h报错
    options:
      - moe_token_unpermute
      - moe_token_permute_with_routing_map_grad

  moe_token_unpermute_grad:
    module: True
    src:
      - moe/moe_token_unpermute_grad
    exclude:
      - moe/moe_token_unpermute_grad/docs
      - moe/moe_token_unpermute_grad/README.md
    ut_cov_exclude:
      - moe/moe_token_unpermute_grad
    options:
      - moe_token_unpermute_grad

  moe_token_unpermute_with_ep:
    module: True
    src:
      - moe/moe_token_unpermute_with_ep
    exclude:
      - moe/moe_token_unpermute_with_ep/docs
      - moe/moe_token_unpermute_with_ep/README.md
    ut_cov_exclude:
      - moe/moe_token_unpermute_with_ep
    options:
      - moe_token_unpermute_with_ep

  moe_token_unpermute_with_ep_grad:
    module: True
    src:
      - moe/moe_token_unpermute_with_ep_grad
    exclude:
      - moe/moe_token_unpermute_with_ep_grad/docs
      - moe/moe_token_unpermute_with_ep_grad/README.md
    ut_cov_exclude:
      - moe/moe_token_unpermute_with_ep_grad
    options:
      - moe_token_unpermute_with_ep_grad

  moe_token_unpermute_with_routing_map:
    module: True
    src:
      - moe/moe_token_unpermute_with_routing_map
    exclude:
      - moe/moe_token_unpermute_with_routing_map/docs
      - moe/moe_token_unpermute_with_routing_map/README.md
    ut_cov_exclude:
      - moe/moe_token_unpermute_with_routing_map
    options:
      - moe_token_unpermute_with_routing_map

  moe_token_unpermute_with_routing_map_grad:
    module: True
    src:
      - moe/moe_token_unpermute_with_routing_map_grad
    exclude:
      - moe/moe_token_unpermute_with_routing_map_grad/docs
      - moe/moe_token_unpermute_with_routing_map_grad/README.md
    ut_cov_exclude:
      - moe/moe_token_unpermute_with_routing_map_grad
    options:
      - moe_token_unpermute_with_routing_map_grad

posembedding:
  apply_rotary_pos_emb:
    module: True
    src:
      - posembedding/apply_rotary_pos_emb
    exclude:
      - posembedding/apply_rotary_pos_emb/docs
      - posembedding/apply_rotary_pos_emb/README.md
    ut_cov_exclude:
      - posembedding/apply_rotary_pos_emb
    test:
        examples: False
    options:
      - apply_rotary_pos_emb

  dequant_rope_quant_kvcache:
    module: True
    src:
      - posembedding/dequant_rope_quant_kvcache
    exclude:
      - posembedding/dequant_rope_quant_kvcache/docs
      - posembedding/dequant_rope_quant_kvcache/README.md
    ut_cov_exclude:
      - posembedding/dequant_rope_quant_kvcache
    options:
      - dequant_rope_quant_kvcache

  interleave_rope:
    module: True
    src:
      - posembedding/interleave_rope
    exclude:
      - posembedding/interleave_rope/docs
      - posembedding/interleave_rope/README.md
    ut_cov_exclude:
      - posembedding/interleave_rope
    options:
      - interleave_rope
      - rotary_position_embedding

  rope_quant_kvcache:
    module: True
    src:
      - posembedding/rope_quant_kvcache
    exclude:
      - posembedding/rope_quant_kvcache/docs
      - posembedding/rope_quant_kvcache/README.md
    ut_cov_exclude:
      - posembedding/rope_quant_kvcache
    options:
      - rope_quant_kvcache

  rope_with_sin_cos_cache:
    module: True
    src:
      - posembedding/rope_with_sin_cos_cache
    exclude:
      - posembedding/rope_with_sin_cos_cache/docs
      - posembedding/rope_with_sin_cos_cache/README.md
    ut_cov_exclude:
      - posembedding/rope_with_sin_cos_cache
    options:
      - rope_with_sin_cos_cache

  rotary_position_embedding:
    module: True
    src:
      - posembedding/rotary_position_embedding
    exclude:
      - posembedding/rotary_position_embedding/docs
      - posembedding/rotary_position_embedding/README.md
    ut_cov_exclude:
      - posembedding/rotary_position_embedding
    options:
      - rotary_position_embedding

  rotary_position_embedding_grad:
    module: True
    src:
      - posembedding/rotary_position_embedding_grad
    exclude:
      - posembedding/rotary_position_embedding_grad/docs
      - posembedding/rotary_position_embedding_grad/README.md
    ut_cov_exclude:
      - posembedding/rotary_position_embedding_grad
    options:
      - rotary_position_embedding_grad

mc2:
  matrix:
    all_gather_matmul:
      module: True
      src:
        - mc2/all_gather_matmul
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/all_gather_matmul/docs
        - mc2/all_gather_matmul/README.md
      ut_cov_exclude:
        - mc2/all_gather_matmul
      test:
        examples: False
      options:
        - all_gather_matmul

    allto_all_all_gather_batch_mat_mul:
      module: True
      src:
        - mc2/allto_all_all_gather_batch_mat_mul
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/allto_all_all_gather_batch_mat_mul/docs
        - mc2/allto_all_all_gather_batch_mat_mul/README.md
      ut_cov_exclude:
        - mc2/allto_all_all_gather_batch_mat_mul
      test:
        examples: False
        ut: False
      options:
        - allto_all_all_gather_batch_mat_mul

    allto_allv_grouped_mat_mul:
      module: True
      src:
        - mc2/allto_allv_grouped_mat_mul
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/allto_allv_grouped_mat_mul/docs
        - mc2/allto_allv_grouped_mat_mul/README.md
      ut_cov_exclude:
        - mc2/allto_allv_grouped_mat_mul
      test:
        examples: False
      options:
        - allto_allv_grouped_mat_mul

    batch_mat_mul_reduce_scatter_allto_all:
      module: True
      src:
        - mc2/batch_mat_mul_reduce_scatter_allto_all
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/batch_mat_mul_reduce_scatter_allto_all/docs
        - mc2/batch_mat_mul_reduce_scatter_allto_all/README.md
      ut_cov_exclude:
        - mc2/batch_mat_mul_reduce_scatter_allto_all
      test:
        examples: False
        ut: False
      options:
        - batch_mat_mul_reduce_scatter_allto_all

    grouped_mat_mul_allto_allv:
      module: True
      src:
        - mc2/grouped_mat_mul_allto_allv
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/grouped_mat_mul_allto_allv/docs
        - mc2/grouped_mat_mul_allto_allv/README.md
      ut_cov_exclude:
        - mc2/grouped_mat_mul_allto_allv
      test:
        examples: False
      options:
        - grouped_mat_mul_allto_allv

    inplace_matmul_all_reduce_add_rms_norm:
      module: True
      src:
        - mc2/inplace_matmul_all_reduce_add_rms_norm
        - mc2/matmul_all_reduce_add_rms_norm
        - mc2/matmul_all_reduce
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/inplace_matmul_all_reduce_add_rms_norm/docs
        - mc2/inplace_matmul_all_reduce_add_rms_norm/README.md
      ut_cov_exclude:
        - mc2/inplace_matmul_all_reduce_add_rms_norm
      test:
        examples: False
        ut: False
      options:
        - inplace_matmul_all_reduce_add_rms_norm
        - matmul_all_reduce_add_rms_norm

    matmul_all_reduce:
      module: True
      src:
        - mc2/matmul_all_reduce
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/matmul_all_reduce/docs
        - mc2/matmul_all_reduce/README.md
      ut_cov_exclude:
        - mc2/matmul_all_reduce
      test:
        examples: False
        ut: False
      options:
        - matmul_all_reduce

    matmul_all_reduce_add_rms_norm:
      module: True
      src:
        - mc2/matmul_all_reduce_add_rms_norm
        - mc2/matmul_all_reduce
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/matmul_all_reduce_add_rms_norm/docs
        - mc2/matmul_all_reduce_add_rms_norm/README.md
      ut_cov_exclude:
        - mc2/matmul_all_reduce_add_rms_norm
      test:
        examples: False
        ut: False
      options:
        - matmul_all_reduce_add_rms_norm

    matmul_reduce_scatter:
      module: True
      src:
        - mc2/matmul_reduce_scatter
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/matmul_reduce_scatter/docs
        - mc2/matmul_reduce_scatter/README.md
      ut_cov_exclude:
        - mc2/matmul_reduce_scatter
      test:
        examples: False
      options:
        - matmul_reduce_scatter

  moe_distribute:
    distribute_barrier:
      module: True
      src:
        - mc2/distribute_barrier
        - mc2/common
      exclude:
        - mc2/distribute_barrier/docs
        - mc2/distribute_barrier/README.md
      ut_cov_exclude:
        - mc2/distribute_barrier
      test:
        examples: False
      options:
        - distribute_barrier
        - moe_distribute_dispatch_v2
        - moe_distribute_combine_v2

    moe_distribute_combine:
      module: True
      src:
        - mc2/moe_distribute_combine
        - mc2/common
      exclude:
        - mc2/moe_distribute_combine/docs
        - mc2/moe_distribute_combine/README.md
      ut_cov_exclude:
        - mc2/moe_distribute_combine
      test:
        examples: False
        ut: False
      options:
        - moe_distribute_combine
        - moe_distribute_dispatch

    moe_distribute_combine_add_rms_norm:
      module: True
      src:
        - mc2/moe_distribute_combine_add_rms_norm
        - mc2/common
        - mc2/3rd
      exclude:
        - mc2/moe_distribute_combine_add_rms_norm/docs
        - mc2/moe_distribute_combine_add_rms_norm/README.md
      ut_cov_exclude:
        - mc2/moe_distribute_combine_add_rms_norm
      test:
        examples: False
      options:
        - moe_distribute_combine_add_rms_norm
        - moe_distribute_dispatch_v2

    moe_distribute_combine_v2:
      module: True
      src:
        - mc2/moe_distribute_combine_v2
        - mc2/common
      exclude:
        - mc2/moe_distribute_combine_v2/docs
        - mc2/moe_distribute_combine_v2/README.md
      ut_cov_exclude:
        - mc2/moe_distribute_combine_v2
      test:
        examples: False
        ut: False
      options:
        - moe_distribute_combine_v2
        - moe_distribute_dispatch_v2

    moe_distribute_dispatch:
      module: True
      src:
        - mc2/moe_distribute_dispatch
        - mc2/common
      exclude:
        - mc2/moe_distribute_dispatch/docs
        - mc2/moe_distribute_dispatch/README.md
      ut_cov_exclude:
        - mc2/moe_distribute_dispatch
      test:
        examples: False
        ut: False
      options:
        - moe_distribute_dispatch
        - moe_distribute_combine

    moe_distribute_dispatch_v2:
      module: True
      src:
        - mc2/moe_distribute_dispatch_v2
        - mc2/common
      exclude:
        - mc2/moe_distribute_dispatch_v2/docs
        - mc2/moe_distribute_dispatch_v2/README.md
      ut_cov_exclude:
        - mc2/moe_distribute_dispatch_v2
      test:
        examples: False
        ut: False
      options:
        - moe_distribute_dispatch_v2
        - moe_distribute_combine_v2

    moe_update_expert:
      module: True
      src:
        - mc2/moe_update_expert
        - mc2/common
      exclude:
        - mc2/moe_update_expert/docs
        - mc2/moe_update_expert/README.md
      ut_cov_exclude:
        - mc2/moe_update_expert
      test:
        examples: False
      options:
        - moe_update_expert
        - moe_distribute_dispatch_v2
        - moe_distribute_combine_add_rms_norm
